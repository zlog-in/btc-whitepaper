<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>区块链 · 比特币白皮书</title>
    <meta data-i18n-title="title.chain">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>₿</text></svg>">
    <link rel="stylesheet" href="../css/style.css?v=20260206a">
</head>
<body>
    <nav class="nav">
        <div class="nav-content">
            <a href="../index.html" class="logo">
                <span class="logo-title" data-i18n="nav.logo">₿ Bitcoin Whitepaper</span>
                <span class="logo-subtitle" data-i18n="nav.subtitle">交互式学习指南</span>
            </a>
            <a href="../index.html" class="nav-home" data-i18n="nav.home">🏠 首页</a>
            <div class="nav-groups">
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">🔐</span><span data-i18n="nav.group.crypto">密码学</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="hash.html" data-i18n="nav.hash">哈希函数</a>
                        <a href="sha256.html" class="sub-link" data-i18n="nav.sha256">└ SHA-256 过程</a>
                        <a href="merkle.html" class="sub-link" data-i18n="nav.merkle">└ Merkle Tree</a>
                        <a href="signature.html" data-i18n="nav.signature">数字签名</a>
                        <a href="ecdsa.html" class="sub-link" data-i18n="nav.ecdsa">└ ECDSA 过程</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">📍</span><span data-i18n="nav.group.address">地址</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="address.html" data-i18n="nav.address">比特币地址</a>
                        <a href="multisig.html" class="sub-link" data-i18n="nav.multisig">└ 多重签名</a>
                        <a href="timelock.html" class="sub-link" data-i18n="nav.timelock">└ 时间锁</a>
                        <a href="htlc.html" class="sub-link" data-i18n="nav.htlc">└ 哈希时间锁</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">💰</span><span data-i18n="nav.group.tx">交易</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="cash.html" data-i18n="nav.cash">现金模型</a>
                        <a href="utxo.html" class="sub-link" data-i18n="nav.utxo">└ UTXO 模型</a>
                    </div>
                </div>
                <div class="nav-group expanded has-active">
                    <div class="nav-group-title">
                        <span><span class="group-icon">📦</span><span data-i18n="nav.group.block">区块</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="block.html" data-i18n="nav.block">区块结构</a>
                        <a href="mining.html" class="sub-link" data-i18n="nav.mining">└ 挖矿原理</a>
                        <a href="chain.html" class="active" data-i18n="nav.chain">区块链</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">🌐</span><span data-i18n="nav.group.consensus">共识</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="pow.html" data-i18n="nav.pow">工作量证明</a>
                        <a href="p2p.html" data-i18n="nav.p2p">共识传播</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section class="section">
            <div class="container">
                <div class="page-header">
                    <span class="page-icon">⛓️</span>
                    <div>
                        <h1 data-i18n="chain.title">区块链</h1>
                        <p class="section-desc" data-i18n="chain.desc">区块通过哈希指针连接成链，每个区块都包含前一区块的哈希值，形成一条不可篡改的数据链条。</p>
                    </div>
                </div>

                <!-- 链的核心概念 -->
                <div class="demo-box">
                    <h3 data-i18n="chain.concept.title">🔗 什么是"链"？</h3>
                    <p class="demo-desc" data-i18n="chain.concept.desc">区块链的"链"指的是哈希指针：每个区块都存储前一个区块的哈希值，形成单向链接。</p>

                    <div class="chain-concept">
                        <div class="concept-block">
                            <div class="concept-label" data-i18n="chain.concept.blockN1">区块 N-1</div>
                            <div class="concept-hash"><span data-i18n="chain.concept.hash">哈希:</span> <code>a3f2...</code></div>
                        </div>
                        <div class="concept-arrow">
                            <div class="arrow-line"></div>
                            <div class="arrow-label" data-i18n="chain.concept.pointer">哈希指针</div>
                        </div>
                        <div class="concept-block">
                            <div class="concept-label" data-i18n="chain.concept.blockN">区块 N</div>
                            <div class="concept-prev"><span data-i18n="chain.concept.prevhash">前哈希:</span> <code>a3f2...</code></div>
                            <div class="concept-hash"><span data-i18n="chain.concept.hash">哈希:</span> <code>7b1c...</code></div>
                        </div>
                        <div class="concept-arrow">
                            <div class="arrow-line"></div>
                            <div class="arrow-label" data-i18n="chain.concept.pointer">哈希指针</div>
                        </div>
                        <div class="concept-block">
                            <div class="concept-label" data-i18n="chain.concept.blockN1plus">区块 N+1</div>
                            <div class="concept-prev"><span data-i18n="chain.concept.prevhash">前哈希:</span> <code>7b1c...</code></div>
                            <div class="concept-hash"><span data-i18n="chain.concept.hash">哈希:</span> <code>e9d4...</code></div>
                        </div>
                    </div>
                </div>

                <!-- 区块链增长演示 -->
                <div class="demo-box">
                    <h3 data-i18n="chain.growth.title">📈 区块链增长过程</h3>
                    <p class="demo-desc" data-i18n="chain.growth.desc">观看一个新区块如何被创建并添加到链上的完整过程。</p>

                    <div class="growth-demo">
                        <!-- 交易池 -->
                        <div class="growth-stage" id="stage-txpool">
                            <div class="stage-header">
                                <span class="stage-number">1</span>
                                <span class="stage-title" data-i18n="chain.growth.stage.txpool">交易池</span>
                            </div>
                            <div class="stage-content">
                                <div class="tx-pool" id="tx-pool">
                                    <div class="pending-tx" data-tx="1" data-i18n="chain.growth.tx1">💸 Alice → Bob: 0.5 BTC</div>
                                    <div class="pending-tx" data-tx="2" data-i18n="chain.growth.tx2">💸 Charlie → Dave: 0.3 BTC</div>
                                    <div class="pending-tx" data-tx="3" data-i18n="chain.growth.tx3">💸 Eve → Frank: 0.8 BTC</div>
                                </div>
                            </div>
                        </div>

                        <div class="growth-arrow">→</div>

                        <!-- 打包区块 -->
                        <div class="growth-stage" id="stage-packaging">
                            <div class="stage-header">
                                <span class="stage-number">2</span>
                                <span class="stage-title" data-i18n="chain.growth.stage.pack">打包区块</span>
                            </div>
                            <div class="stage-content">
                                <div class="packaging-block" id="packaging-block">
                                    <div class="pack-field">
                                        <span class="pack-label" data-i18n="chain.growth.pack.prevhash">前哈希:</span>
                                        <span class="pack-value" id="pack-prev-hash" data-i18n="chain.growth.pack.waiting">等待中...</span>
                                    </div>
                                    <div class="pack-field">
                                        <span class="pack-label" data-i18n="chain.growth.pack.tx">交易:</span>
                                        <span class="pack-value" id="pack-txs" data-i18n="chain.growth.pack.txcount">0 笔</span>
                                    </div>
                                    <div class="pack-field">
                                        <span class="pack-label">Nonce:</span>
                                        <span class="pack-value" id="pack-nonce">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="growth-arrow">→</div>

                        <!-- 挖矿 -->
                        <div class="growth-stage" id="stage-mining">
                            <div class="stage-header">
                                <span class="stage-number">3</span>
                                <span class="stage-title" data-i18n="chain.growth.stage.mining">挖矿</span>
                            </div>
                            <div class="stage-content">
                                <div class="mining-progress">
                                    <div class="mining-status" id="mining-status" data-i18n="chain.growth.mining.waiting">等待开始</div>
                                    <div class="mining-bar">
                                        <div class="mining-fill" id="mining-fill"></div>
                                    </div>
                                    <div class="mining-hash" id="mining-current-hash">-</div>
                                </div>
                            </div>
                        </div>

                        <div class="growth-arrow">→</div>

                        <!-- 添加到链 -->
                        <div class="growth-stage" id="stage-added">
                            <div class="stage-header">
                                <span class="stage-number">4</span>
                                <span class="stage-title" data-i18n="chain.growth.stage.added">上链</span>
                            </div>
                            <div class="stage-content">
                                <div class="added-indicator" id="added-indicator">
                                    <span class="added-icon">⏳</span>
                                    <span class="added-text" data-i18n="chain.growth.added.waiting">等待区块</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="growth-controls">
                        <button id="start-growth-btn" class="btn primary" data-i18n="chain.growth.btn.start">▶️ 开始演示</button>
                        <button id="auto-growth-btn" class="btn" data-i18n="chain.growth.btn.auto">🔄 自动增长</button>
                        <button id="reset-growth-btn" class="btn secondary" data-i18n="chain.growth.btn.reset">🔄 重置</button>
                    </div>
                </div>

                <!-- 动态区块链展示 -->
                <div class="demo-box">
                    <h3 data-i18n="chain.live.title">⛓️ 实时区块链</h3>
                    <p class="demo-desc" data-i18n="chain.live.desc">点击任意区块的数据区域进行修改，观察哈希如何变化以及链的完整性如何被破坏。</p>

                    <div class="chain-stats">
                        <div class="stat-item">
                            <span class="stat-label" data-i18n="chain.stat.length">链长度:</span>
                            <span class="stat-value" id="chain-length">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label" data-i18n="chain.stat.status">状态:</span>
                            <span class="stat-value" id="chain-status" data-i18n="chain.stat.valid">有效 ✅</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label" data-i18n="chain.stat.difficulty">难度:</span>
                            <span class="stat-value" data-i18n="chain.stat.leading">2 个前导零</span>
                        </div>
                    </div>

                    <div class="blockchain-visual" id="blockchain-visual">
                        <!-- 区块链将在这里动态渲染 -->
                    </div>

                    <div class="chain-controls">
                        <button id="add-block-btn" class="btn" data-i18n="chain.add.btn">➕ 添加新区块</button>
                        <button id="reset-chain-btn" class="btn secondary" data-i18n="chain.reset.btn">🔄 重置链</button>
                    </div>
                </div>

                <!-- 篡改检测 -->
                <div class="demo-box" id="tamper-demo">
                    <h3 data-i18n="chain.tamper.demo.title">🔍 篡改检测演示</h3>
                    <p class="demo-desc" data-i18n="chain.tamper.demo.desc">修改任意区块的数据，观察链的完整性如何被破坏。</p>

                    <div class="tamper-explanation" id="tamper-explanation" style="display: none;">
                        <div class="tamper-header">
                            <span class="tamper-icon">⚠️</span>
                            <span class="tamper-title" data-i18n="chain.tamper.detected">检测到篡改！</span>
                        </div>
                        <div class="tamper-details">
                            <p><span data-i18n="chain.tamper.modify">修改区块</span> <strong id="tampered-block">-</strong> <span data-i18n="chain.tamper.caused">的数据导致：</span></p>
                            <ol>
                                <li data-i18n="chain.tamper.reason1">该区块的哈希值改变</li>
                                <li data-i18n="chain.tamper.reason2">后续区块的"前哈希"字段与实际不符</li>
                                <li data-i18n="chain.tamper.reason3">整条链从修改点开始失效</li>
                            </ol>
                            <p class="tamper-note" data-i18n="chain.tamper.note">攻击者必须重新计算所有后续区块的工作量证明，这在计算上是不可行的。</p>
                        </div>
                        <button id="fix-chain-btn" class="btn" data-i18n="chain.tamper.fix.btn">⛏️ 重新挖矿修复</button>
                    </div>
                </div>

                <!-- 区块链特性 -->
                <div class="card highlight">
                    <h4 data-i18n="chain.immutable.title">💡 为什么区块链不可篡改？</h4>
                    <div class="immutable-reasons">
                        <div class="reason-item">
                            <span class="reason-icon">🔗</span>
                            <div>
                                <strong data-i18n="chain.immutable.chain">链式连接</strong>
                                <p data-i18n="chain.immutable.chain.desc">每个区块包含前一区块的哈希，修改任何数据都会改变哈希值</p>
                            </div>
                        </div>
                        <div class="reason-item">
                            <span class="reason-icon">⛏️</span>
                            <div>
                                <strong data-i18n="chain.immutable.pow">工作量证明</strong>
                                <p data-i18n="chain.immutable.pow.desc">重新计算哈希需要消耗大量算力，篡改成本极高</p>
                            </div>
                        </div>
                        <div class="reason-item">
                            <span class="reason-icon">🌐</span>
                            <div>
                                <strong data-i18n="chain.immutable.distributed">分布式存储</strong>
                                <p data-i18n="chain.immutable.distributed.desc">链的副本分布在全球数千个节点，无法同时篡改所有副本</p>
                            </div>
                        </div>
                        <div class="reason-item">
                            <span class="reason-icon">📏</span>
                            <div>
                                <strong data-i18n="chain.immutable.longest">最长链原则</strong>
                                <p data-i18n="chain.immutable.longest.desc">网络始终信任最长的有效链，篡改者需要超越整个网络的算力</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="page-nav">
                    <a href="mining.html" class="btn secondary" data-i18n="chain.nav.prev">← 挖矿原理</a>
                    <a href="pow.html" class="btn primary" data-i18n="chain.nav.next">工作量证明 →</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p><span data-i18n="footer.text">基于 Satoshi Nakamoto 的</span><a href="https://bitcoin.org/bitcoin.pdf" target="_blank" data-i18n="footer.link">比特币白皮书</a><span data-i18n="footer.suffix">制作</span></p>
    </footer>

    <script src="../js/i18n.js?v=20260206a"></script>
    <script src="../js/chain.js?v=20260206a"></script>
</body>
</html>
