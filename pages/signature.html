<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数字签名 · 比特币白皮书</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>₿</text></svg>">
    <link rel="stylesheet" href="../css/style.css?v=20260202t">
</head>
<body>
    <nav class="nav">
        <div class="nav-content">
            <a href="../index.html" class="logo">
                <span class="logo-title" data-i18n="nav.logo">₿ Bitcoin Whitepaper</span>
                <span class="logo-subtitle" data-i18n="nav.subtitle">交互式学习指南</span>
            </a>
            <a href="../index.html" class="nav-home" data-i18n="nav.home">🏠 首页</a>
            <div class="nav-groups">
                <div class="nav-group expanded has-active">
                    <div class="nav-group-title">
                        <span><span class="group-icon">🔐</span><span data-i18n="nav.group.crypto">密码学</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="hash.html" data-i18n="nav.hash">哈希函数</a>
                        <a href="sha256.html" class="sub-link" data-i18n="nav.sha256">└ SHA-256 过程</a>
                        <a href="merkle.html" class="sub-link" data-i18n="nav.merkle">└ Merkle Tree</a>
                        <a href="signature.html" class="active" data-i18n="nav.signature">数字签名</a>
                        <a href="ecdsa.html" class="sub-link" data-i18n="nav.ecdsa">└ ECDSA 过程</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">📍</span><span data-i18n="nav.group.address">地址</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="address.html" data-i18n="nav.address">比特币地址</a>
                        <a href="multisig.html" class="sub-link" data-i18n="nav.multisig">└ 多重签名</a>
                        <a href="timelock.html" class="sub-link" data-i18n="nav.timelock">└ 时间锁</a>
                        <a href="htlc.html" class="sub-link" data-i18n="nav.htlc">└ 哈希时间锁</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">💰</span><span data-i18n="nav.group.tx">交易</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="cash.html" data-i18n="nav.cash">现金模型</a>
                        <a href="utxo.html" class="sub-link" data-i18n="nav.utxo">└ UTXO 模型</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">📦</span><span data-i18n="nav.group.block">区块</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="block.html" data-i18n="nav.block">区块结构</a>
                        <a href="chain.html" data-i18n="nav.chain">区块链</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">
                        <span><span class="group-icon">🌐</span><span data-i18n="nav.group.consensus">共识</span></span>
                        <span class="expand-icon">▶</span>
                    </div>
                    <div class="nav-group-links">
                        <a href="pow.html" data-i18n="nav.pow">工作量证明</a>
                        <a href="p2p.html" data-i18n="nav.p2p">P2P 网络</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section class="section">
            <div class="container">
                <div class="page-header">
                    <span class="page-icon">✍️</span>
                    <div>
                        <h1 data-i18n="sig.title">数字签名</h1>
                        <p class="section-desc" data-i18n="sig.desc">数字签名用于证明交易确实由比特币的所有者发起，防止他人伪造交易。</p>
                    </div>
                </div>

                <div class="demo-box">
                    <h3 data-i18n="sig.step1.title">🔑 第一步：生成密钥对</h3>
                    <p class="demo-desc" data-i18n="sig.step1.desc">每个用户拥有一对密钥：私钥（保密）和公钥（公开）。私钥用于签名，公钥用于验证。</p>

                    <button id="generate-keys" class="btn primary" data-i18n="sig.generate.btn">🎲 生成新密钥对</button>

                    <div class="key-pair">
                        <div class="key-box private">
                            <label data-i18n="sig.private.label">🔐 私钥（保密）</label>
                            <div class="key-display" id="private-key" data-i18n="sig.click.generate">点击生成...</div>
                        </div>
                        <div class="key-box public">
                            <label data-i18n="sig.public.label">🔓 公钥（公开）</label>
                            <div class="key-display" id="public-key" data-i18n="sig.click.generate">点击生成...</div>
                        </div>
                    </div>
                </div>

                <div class="demo-box">
                    <h3 data-i18n="sig.step2.title">✍️ 第二步：签名消息</h3>
                    <p class="demo-desc" data-i18n="sig.step2.desc">使用私钥对消息进行签名，生成数字签名。</p>

                    <div class="input-group">
                        <label data-i18n="sig.message.label">输入要签名的消息：</label>
                        <textarea id="message-input" placeholder="例如：Alice 转给 Bob 10 BTC">Alice 转给 Bob 10 BTC</textarea>
                    </div>

                    <button id="sign-btn" class="btn primary" disabled data-i18n="sig.sign.btn">✍️ 使用私钥签名</button>

                    <!-- 签名过程可视化 -->
                    <div class="sign-process" id="sign-process" style="display: none;">
                        <h4 data-i18n="sig.process.title">📋 签名过程</h4>
                        <div class="process-flow">
                            <div class="process-step" id="sign-step-1">
                                <div class="step-icon">📄</div>
                                <div class="step-label" data-i18n="sig.process.msg">原始消息</div>
                                <div class="step-value" id="sign-msg-value">-</div>
                            </div>
                            <div class="process-arrow" id="sign-arrow-1">→</div>
                            <div class="process-step" id="sign-step-2">
                                <div class="step-icon">🔐</div>
                                <div class="step-label" data-i18n="sig.process.hash">SHA-256 哈希</div>
                                <div class="step-value hash-value" id="sign-hash-value">-</div>
                            </div>
                            <div class="process-arrow" id="sign-arrow-2">→</div>
                            <div class="process-step" id="sign-step-3">
                                <div class="step-icon">🔑</div>
                                <div class="step-label" data-i18n="sig.process.sign">私钥签名</div>
                                <div class="step-value hash-value" id="sign-privkey-value">-</div>
                            </div>
                            <div class="process-arrow" id="sign-arrow-3">→</div>
                            <div class="process-step" id="sign-step-4">
                                <div class="step-icon">✅</div>
                                <div class="step-label" data-i18n="sig.process.result">数字签名</div>
                                <div class="step-value hash-value" id="sign-result-value">-</div>
                            </div>
                        </div>
                    </div>

                    <div class="signature-output">
                        <label data-i18n="sig.signature.label">📝 数字签名：</label>
                        <div class="hash-display" id="signature-output" data-i18n="sig.generate.first">先生成密钥对...</div>
                    </div>
                </div>

                <div class="demo-box">
                    <h3 data-i18n="sig.step3.title">✅ 第三步：验证签名</h3>
                    <p class="demo-desc" data-i18n="sig.step3.desc">任何人都可以使用公钥验证签名是否有效。尝试修改消息，观察验证结果。</p>

                    <div class="input-group">
                        <label data-i18n="sig.verify.message.label">待验证的消息：</label>
                        <textarea id="verify-message" placeholder="输入消息..."></textarea>
                    </div>

                    <div class="input-group">
                        <label data-i18n="sig.verify.sig.label">待验证的签名：</label>
                        <textarea id="verify-signature" placeholder="输入签名..."></textarea>
                    </div>

                    <button id="verify-btn" class="btn" disabled data-i18n="sig.verify.btn">🔍 使用公钥验证</button>

                    <!-- 验证过程可视化 -->
                    <div class="verify-process" id="verify-process" style="display: none;">
                        <h4 data-i18n="sig.verify.process.title">🔍 验证过程</h4>
                        <div class="verify-flow">
                            <div class="verify-row">
                                <div class="verify-item" id="verify-step-1">
                                    <div class="verify-label" data-i18n="sig.verify.process.msg">待验证消息</div>
                                    <div class="verify-value" id="verify-msg-display">-</div>
                                </div>
                                <div class="verify-arrow">↓</div>
                                <div class="verify-item" id="verify-step-2">
                                    <div class="verify-label" data-i18n="sig.verify.process.hash">计算消息哈希</div>
                                    <div class="verify-value hash-value" id="verify-msg-hash">-</div>
                                </div>
                            </div>
                            <div class="verify-compare" id="verify-step-3">
                                <div class="compare-left">
                                    <div class="compare-label" data-i18n="sig.verify.process.recalc">使用公钥重新计算签名</div>
                                    <div class="compare-value hash-value" id="verify-expected-sig">-</div>
                                </div>
                                <div class="compare-icon" id="compare-icon">⚖️</div>
                                <div class="compare-right">
                                    <div class="compare-label" data-i18n="sig.verify.process.provided">提供的签名</div>
                                    <div class="compare-value hash-value" id="verify-provided-sig">-</div>
                                </div>
                            </div>
                            <div class="verify-final" id="verify-step-4">
                                <div class="verify-final-icon" id="verify-final-icon">❓</div>
                                <div class="verify-final-text" id="verify-final-text" data-i18n="sig.verify.process.verifying">验证中...</div>
                            </div>
                        </div>
                    </div>

                    <div class="verify-result" id="verify-result"></div>
                </div>

                <div class="card info">
                    <h4 data-i18n="sig.features.title">🎯 数字签名的作用</h4>
                    <ul>
                        <li><strong data-i18n="sig.feature.1">身份验证</strong> — <span data-i18n="sig.feature.1.desc">证明交易由私钥持有者发起</span></li>
                        <li><strong data-i18n="sig.feature.2">不可伪造</strong> — <span data-i18n="sig.feature.2.desc">没有私钥无法生成有效签名</span></li>
                        <li><strong data-i18n="sig.feature.3">不可否认</strong> — <span data-i18n="sig.feature.3.desc">签名者无法否认曾经签名</span></li>
                        <li><strong data-i18n="sig.feature.4">完整性</strong> — <span data-i18n="sig.feature.4.desc">消息被篡改后签名失效</span></li>
                    </ul>
                </div>

                <div class="card highlight">
                    <h4 data-i18n="sig.bitcoin.title">₿ 在比特币中的应用</h4>
                    <p data-i18n="sig.bitcoin.desc">当你发起一笔比特币交易时，你的钱包会使用私钥对交易进行签名。网络中的其他节点使用你的公钥（从比特币地址派生）验证签名，确认这笔交易确实由你授权。</p>
                </div>

                <!-- ECDSA 子页面链接 -->
                <div class="sha256-link-box">
                    <a href="ecdsa.html" class="sha256-link">
                        <span class="link-icon">🔏</span>
                        <span class="link-content">
                            <span class="link-title" data-i18n="sig.ecdsa.link.title">深入了解 ECDSA 算法</span>
                            <span class="link-desc" data-i18n="sig.ecdsa.link.desc">查看椭圆曲线点乘法、签名生成和验证的完整数学计算过程</span>
                        </span>
                        <span class="link-arrow">→</span>
                    </a>
                </div>

                <div class="page-nav">
                    <a href="hash.html" class="btn secondary" data-i18n="sig.nav.prev">← 哈希函数</a>
                    <a href="address.html" class="btn primary" data-i18n="sig.nav.next">比特币地址 →</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p><span data-i18n="footer.text">基于 Satoshi Nakamoto 的</span><a href="https://bitcoin.org/bitcoin.pdf" target="_blank" data-i18n="footer.link">比特币白皮书</a><span data-i18n="footer.suffix">制作</span></p>
    </footer>

    <script src="../js/i18n.js?v=20260202j"></script>
    <script src="../js/signature.js?v=20260202j"></script>
</body>
</html>
